<div *ngIf="isDialog; else notDialog">
  <mat-dialog-actions class="dialog-header">
    <h3 class="dialog-title">Mobile Devices</h3>
    <div class="dialog-draggable-wrapper">
      <draggable-window style="margin-top: -23px !important; margin-right: 10px;"></draggable-window>
    </div>
  </mat-dialog-actions>

  <mat-dialog-content class="scrollable-content">
    <ng-container>
      <!-- <h2 mat-dialog-title>Mobile Devices</h2> -->
      <!-- Available Devices -->
      <div class="devices">
        <!-- <div *ngIf="container.length > 0"> -->
          <!-- Mobile selection section -->
          <div class="mobile-selector-box">
            <div class="mobiles">
              <!-- Iterate over mobile containers list -->
              <div class="mobile" *ngFor="let mobile of mobiles">
                <div
                  *ngLet="
                    isThisMobileContainerRunning(
                      mobile.mobile_id
                    ) as runningContainer
                  ">
                  <!-- Take it and put it above on the mobile div with X  -->
                  <!-- Popup a confirmation box to Yes/No -->
                  <div 
                    class="button-container"
                    *ngIf="runningContainer; else notRunningTemplate">
                    <div
                      mat-raised-button
                      class="clipped"
                      (click)="!runningContainer?.isTerminating && terminateMobile(runningContainer)"
                      [ngClass]="{ 'spinner-active': runningContainer?.isTerminating }">
                      <ng-container  
                        [matTooltip]="'mobile_list.close_emulator' | translate"
                        matTooltipPosition="above"
                        *ngIf="!runningContainer?.isTerminating; else showSpinner">
                        <mat-icon class="close-icon">close</mat-icon>
                      </ng-container>
                  
                      <ng-template #showSpinner>
                        <mat-spinner
                          class="spinner"
                          color="accent"
                          diameter="16">
                        </mat-spinner>
                      </ng-template>
                    </div>
                  </div>

                  <ng-template #notRunningTemplate>
                    <div class="not-running">
                    </div>
                  </ng-template>

                  <!-- Mobile details -->
                  <div class="mobile-details">
                    <h4>
                      Mobile Information
                    </h4>
                    <mat-divider></mat-divider>
                    <div class="mobile-information">
                      <div class="emulator-info">
                        <i class="material-icons">adb</i>
                        <strong>Mobile Name:</strong>
                        {{ mobile.mobile_image_name }}
                        <mat-icon
                          (click)="importClipboard(mobile.mobile_image_name)"
                          [ngClass]="{ active: isIconActive[mobile.mobile_image_name] }"
                          class="copyClipboardIcon"
                          [color]="isIconActive[mobile.mobile_image_name] ? 'primary' : ''">
                          content_copy
                        </mat-icon>
                      </div>
                      <ng-container>
                        <div class="status-container">
                          <i class="material-icons">{{ runningContainer ? 'check_circle' : 'highlight_off' }}</i>
                          <strong>Status:</strong>
                          <span [ngClass]="{ 'running-text': runningContainer, 'stopped-text': !runningContainer }">
                            {{ runningContainer? runningContainer?.service_status: "Not Started"}}
                          </span>
                          <!-- Corrected ngClass syntax -->
                          <span [ngClass]="{ 'running': runningContainer, 'stopped': !runningContainer }" class="status-circle"></span>
                        </div>
                      <div class="options">
                        <button
                          matTooltip="Show more information"
                          matTooltipPosition="above"
                          mat-icon-button
                          [matMenuTriggerFor]="featureOptions">
                          <mat-icon>more_vert</mat-icon>
                        </button>
                        <span>
                          More information
                        </span>
                      </div>

                      <mat-menu #featureOptions="matMenu">
                        <mat-menu-item class="pop-up-info">
                          <ng-container *ngIf="runningContainer">
                            <mat-menu-item>
                              <i class="material-icons">code</i>
                              <strong>Mobile Code:</strong> {{ runningContainer.hostname }}
                              <mat-icon
                                (click)="importClipboard(runningContainer.hostname); $event.stopPropagation();"
                                [ngClass]="{ active: isIconActive[runningContainer.hostname] }"
                                class="copyClipboardIcon"
                                [color]="isIconActive[runningContainer.hostname] ? 'primary' : ''">
                                content_copy
                              </mat-icon>
                            </mat-menu-item>
                          </ng-container>

                          <mat-menu-item>
                            <i class="material-icons">info</i>
                            <strong>Device Name:</strong> {{ mobile.mobile_json.deviceName }}
                          </mat-menu-item>

                          <mat-menu-item>
                            <i class="material-icons">memory</i>
                            <strong>Architecture:</strong> {{ mobile.mobile_json.architecture }}
                          </mat-menu-item>

                          <mat-menu-item>
                            <i class="material-icons">phone_android</i>
                            <strong>Android Version:</strong> {{ mobile.mobile_json.android_version }}
                          </mat-menu-item>

                          <mat-menu-item>
                            <i class="material-icons">layers</i>
                            <strong>API Level:</strong> {{ mobile.mobile_json.api_level }}
                          </mat-menu-item>
                        </mat-menu-item>
                      </mat-menu>
                      </ng-container>
                    </div>


                    <h4 id="mobile-actions">Mobile Actions</h4>
                    <mat-divider></mat-divider>
                    <div class="apk-selection">
                      <mat-slide-toggle
                        [disabled]="!runningContainer"
                        class="mat-slider-toggle"
                        id="isShared_{{ mobile.mobile_id }}"
                        color="primary"
                        [checked]="runningContainer?.shared"
                        (change)="
                          updateSharedStatus($event, mobile, runningContainer)
                        ">
                        Share this mobile with others
                      </mat-slide-toggle>
                      <div
                        [ngClass]="{ 'disabled-content': !runningContainer }"
                        class="row-content">
                        <mat-icon [inline]="true" class="get-app"
                        [matTooltip]="'mobile_list.apk_file' | translate"
                          matTooltipPosition="above">
                          file_download
                        </mat-icon>
                        <p
                          [matTooltip]="'mobile_list.apk_file' | translate"
                          matTooltipPosition="above">
                          Install Application
                        </p>
                      </div>
                      <mat-form-field appearance="fill" class="select-app">
                        <mat-label>Select App (extension <strong>.apk</strong>)</mat-label>
                        <mat-select
                          [disabled]="!runningContainer"
                          id="apkFileSelectBox_{{ mobile.mobile_id }}"
                          [(value)]="selectedApps[mobile.mobile_id]"
                          (selectionChange)="
                            updateAPKSelection($event, mobile, runningContainer)
                          ">
                          <mat-option
                            *ngFor="let apk_file of this.data.uploadedAPKsList"
                            [value]="apk_file.id">
                            {{ apk_file.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <button
                        class="mobile-buttons-install"
                        mat-raised-button
                        color="primary"
                        [disabled]="!mobile.selectedAPKFileID"
                        (click)="installAPK(mobile, runningContainer)">
                        Install App
                      </button>
                    </div>
                  </div>

                  <!-- Actions: Start, Stop, Inspect -->
                  <div class="mobile-buttons">
                    <button
                      *ngIf="!runningContainer"
                      (click)="startMobile(mobile.mobile_id)"
                      mat-raised-button
                      color="primary"
                      class="start-stop-inpect-buttons start">
                      Start
                    </button>

                    <!-- <ng-container *ngIf="runningContainer">
                      <button
                        (click)="restartMobile(runningContainer)"
                        mat-raised-button
                        color="primary"
                        class="start-stop-inpect-buttons"
                        [disabled]="runningContainer.isTerminating"
                        [matTooltip]="'mobile_list.restart_emulator' | translate" matTooltipPosition="above">
                        Restart
                      </button>
                      <button
                        (click)="pauseMobile(runningContainer)"
                        mat-raised-button
                        color="warn"
                        class="start-stop-inpect-buttons"
                        [disabled]="runningContainer.isTerminating"
                        [matTooltip]="'mobile_list.pause_emulator' | translate" matTooltipPosition="above">
                        Pause
                      </button>
                      <button
                        (click)="inspectMobile(runningContainer, mobile)"
                        mat-raised-button
                        color="basic"
                        class="start-stop-inpect-buttons"
                        [disabled]="runningContainer.isTerminating"
                        [matTooltip]="'mobile_list.inspect_emulator' | translate" matTooltipPosition="above">
                        <span class="inspect-text">Inspect</span>
                        <i class="material-icons icon-on-hover">visibility</i>
                      </button>
                      <button
                        (click)="noVNCMobile(runningContainer, mobile)"
                        mat-raised-button
                        color="basic"
                        class="start-stop-inpect-buttons noVNCButton"
                        [disabled]="runningContainer.isTerminating"
                        [matTooltip]="'mobile_list.inspect_novnc' | translate" matTooltipPosition="above">
                        <span class="inspect-text">noVNC</span>
                        <i class="material-icons icon-on-hover">visibility</i>
                      </button>
                    </ng-container> -->

                    <ng-container *ngIf="runningContainer">
                      <button
                        (click)="restartMobile(runningContainer)"
                        mat-raised-button
                        color="primary"
                        class="start-stop-inpect-buttons"
                        [matTooltip]="'mobile_list.restart_emulator' | translate" matTooltipPosition="above">
                        Restart
                      </button>
                      <button
                        (click)="pauseMobile(runningContainer)"
                        [disabled]="runningContainer.isPaused"
                        mat-raised-button
                        color="warn"
                        class="start-stop-inpect-buttons"
                        [matTooltip]="'mobile_list.pause_emulator' | translate" matTooltipPosition="above">
                        Pause
                      </button>
                      <button
                        (click)="inspectMobile(runningContainer, mobile)"
                        mat-raised-button
                        color="basic"
                        class="start-stop-inpect-buttons"
                        [matTooltip]="'mobile_list.inspect_emulator' | translate" matTooltipPosition="above">
                        <span class="inspect-text">Inspect</span>
                        <i class="material-icons icon-on-hover">visibility</i>
                      </button>
                      <button
                        (click)="noVNCMobile(runningContainer, mobile)"
                        mat-raised-button
                        color="basic"
                        class="start-stop-inpect-buttons noVNCButton"
                        [matTooltip]="'mobile_list.inspect_novnc' | translate" matTooltipPosition="above">
                        <span class="inspect-text">noVNC</span>
                        <i class="material-icons icon-on-hover">visibility</i>
                      </button>
                    </ng-container>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <!-- </div> -->
        <!-- <div *ngIf="container.length === 0" class="no-containers-message">
          <p>No hay contenedores disponibles.</p>
        </div> -->
      </div>

      <div class="devices">
        <!-- Shared selection section -->
        <div class="mobile-selector-box">
          <h3>Shared Mobile Devices</h3>
          <div class="mobiles">
            <!-- Iterate over shared containers list -->
            <div class="mobile" *ngFor="let container of sharedMobileContainers">
              <div *ngLet="container.service_status == 'Running' as isRunning">
                <!-- Shared device details -->
                <div class="mobile-details">
                  <h4>Shared Device Information</h4>
                  <mat-divider></mat-divider>
                  <div class="emulator-info">
                    <i class="material-icons">adb</i>
                    <strong>Mobile Name:</strong>
                    {{ container.image.mobile_image_name }}
                    <mat-icon
                      (click)="importClipboard(container.image.mobile_image_name)"
                      [ngClass]="{ active: isIconActive[container.image.mobile_image_name] }"
                      class="copyClipboardIcon"
                      [color]="isIconActive[container.image.mobile_image_name] ? 'primary' : ''">
                      content_copy
                    </mat-icon>
                  </div>
                  <ng-container>
                    <div class="status-container">
                      <i class="material-icons">{{ isRunning ? 'check_circle' : 'highlight_off' }}</i>
                      <strong>Status:</strong>
                      <span [ngClass]="{ 'running-text': isRunning, 'stopped-text': !isRunning }">
                        {{ container.service_status}}
                      </span>
                      <span [ngClass]="{ 'running': isRunning, 'stopped': !isRunning }" class="status-circle"></span>
                    </div>
                  </ng-container>
                  <ng-container>
                    <div class="options">
                      <button
                        matTooltip="Show more information"
                        matTooltipPosition="above"
                        mat-icon-button
                        [matMenuTriggerFor]="featureOptions">
                        <mat-icon>more_vert</mat-icon>
                      </button>
                      <span>
                        More information
                      </span>
                    </div>

                    <mat-menu #featureOptions="matMenu">
                      <mat-menu-item class="pop-up-info">
                        <ng-container *ngIf="runningContainer">
                          <mat-menu-item>
                            <i class="material-icons">code</i>
                            <strong>Mobile Code:</strong> {{ runningContainer.hostname }}
                            <mat-icon
                              (click)="importClipboard(runningContainer.hostname); $event.stopPropagation();"
                              [ngClass]="{ active: isIconActive[runningContainer.hostname] }"
                              class="copyClipboardIcon"
                              [color]="isIconActive[runningContainer.hostname] ? 'primary' : ''">
                              content_copy
                            </mat-icon>
                          </mat-menu-item>
                        </ng-container>

                        <mat-menu-item>
                          <i class="material-icons">code</i>
                          <strong>Device Code:</strong>
                          {{ container.hostname }}
                          <mat-icon
                            (click)="importClipboard(container.hostname)"
                            [ngClass]="{ active: isIconActive[container.hostname] }"
                            class="copyClipboardIcon"
                            [color]="isIconActive[container.hostname] ? 'primary' : ''">
                            content_copy
                          </mat-icon>
                        </mat-menu-item>

                        <mat-menu-item>
                          <i class="material-icons">info</i>
                          <strong>Device Name:</strong> {{ container.image.mobile_json.deviceName }}
                        </mat-menu-item>

                        <mat-menu-item>
                          <i class="material-icons">memory</i>
                          <strong>Architecture:</strong> {{ container.image.mobile_json.architecture }}
                        </mat-menu-item>

                        <mat-menu-item>
                          <i class="material-icons">phone_android</i>
                          <strong>Android Version:</strong> {{ container.image.mobile_json.android_version }}
                        </mat-menu-item>

                        <mat-menu-item>
                          <i class="material-icons">layers</i>
                          <strong>API Level:</strong> {{ container.image.mobile_json.api_level }}
                        </mat-menu-item>
                      </mat-menu-item>
                    </mat-menu>
                  </ng-container>
                </div>
              </div>

              <!-- Actions: Start, Stop, Inspect -->
              <div class="mobile-buttons-shared">
                <button
                  (click)="inspectMobile(container, container.image)"
                  mat-raised-button
                  color="basic"
                  class="inspect-shared"
                  [matTooltip]="'mobile_list.inspect_emulator_shared' | translate" matTooltipPosition="above">
                  <span class="inspect-text inspect-hover">Inspect</span>
                  <i class="material-icons icon-on-hover">visibility</i>
                </button>
                <button
                  (click)="noVNCMobile(container, mobile)"
                  mat-raised-button
                  color="basic"
                  class="inspect-shared"
                  [matTooltip]="'mobile_list.inspect_novnc_shared' | translate" matTooltipPosition="above">
                  <span class="inspect-text novnc-hover">noVNC</span>
                  <i class="material-icons icon-on-hover">visibility</i>
                </button>
              </div>
              <div class="created-by">
                <strong>Created by:</strong> {{ container.created_by_name }}
              </div>
            </div>
            <p *ngIf="sharedMobileContainers.length == 0">
              There are no shared mobiles available for you. You can ask your
              teammates to share their mobile emulators so you can collaborate on
              the same machine.
            </p>
          </div>
        </div>
      </div>
    </ng-container>
  </mat-dialog-content>

  <mat-dialog-actions class="dialog-footer">
    <button mat-stroked-button color="warn" mat-dialog-close class="closeButton">
      Close
    </button>
  </mat-dialog-actions>
</div>
<ng-template #notDialog>

  <div class="notDialog-landing">

    <div class="mobile-devices-header">
      
      <p>
        Found <span class="mobile-results"> {{ mobiles.length }} </span> mobile devices and <span class="mobile-results"> {{ sharedMobileContainers.length }} </span> shared mobile devices.
      </p>
    </div>

    <div class="columns-button-wrapper">
      <div class="container-father">
        <ng-container>
          <mat-form-field class="selectFormField">
            <mat-label><mat-icon>domain</mat-icon> Select Department <strong class="required">(required)*</strong></mat-label>
            <mat-select
              [(ngModel)]="selectedDepartment"
              (selectionChange)="onDepartmentSelect($event)">
              <mat-option
                class="mobile-options"
                *ngFor="let department of departments"
                [value]="{ id: department.department_id, name: department.department_name}">
                <mat-card>{{ department.department_name }}</mat-card>
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
        <div *ngIf="selectedDepartment.name == ''"
        class="department-warning">
        <mat-icon>info</mat-icon>
        <span>
          Selecting a <strong>department</strong> will make the container buttons available for use.
        </span>
      </div>
      </div>
    </div>

    <div class="dialog-header">
      <h3 class="not-dialog-title">Mobile Devices</h3>
    </div>

    <div class="not-dialog-scrollable-content" *ngIf="selectedDepartment">
        <!-- <h2 mat-dialog-title>Mobile Devices</h2> -->
        <!-- Available Devices -->
        <div class="devices">
          <!-- Mobile selection section -->
          <div class="mobile-selector-box">
            <div class="mobiles">
              <!-- Iterate over mobile containers list -->
              <div class="mobile" *ngFor="let mobile of mobiles">
                <div
                  *ngLet="
                    isThisMobileContainerRunning(
                      mobile.mobile_id
                    ) as runningContainer
                  ">
                  <!-- Take it and put it above on the mobile div with X  -->
                  <!-- Popup a confirmation box to Yes/No -->
                  <div 
                    class="button-container"
                    *ngIf="runningContainer; else notRunningTemplate">
                    <div
                      mat-raised-button
                      class="clipped"
                      (click)="!runningContainer?.isTerminating && terminateMobile(runningContainer)"
                      [ngClass]="{ 'spinner-active': runningContainer?.isTerminating }">
                      <ng-container  
                        [matTooltip]="'mobile_list.close_emulator' | translate"
                        matTooltipPosition="above"
                        *ngIf="!runningContainer?.isTerminating; else showSpinner">
                        <mat-icon class="close-icon">close</mat-icon>
                      </ng-container>
                  
                      <ng-template #showSpinner>
                        <mat-spinner
                          class="spinner"
                          color="accent"
                          diameter="16">
                        </mat-spinner>
                      </ng-template>
                    </div>
                  </div>

                  <ng-template #notRunningTemplate>
                    <div class="not-running">
                    </div>
                  </ng-template>

                  <!-- Mobile details -->
                  <div class="mobile-details">
                    <h4>
                      Mobile Information
                    </h4>
                    <mat-divider></mat-divider>
                    <div class="mobile-information">
                      <div class="emulator-info">
                        <i class="material-icons">adb</i>
                        <strong>Mobile Name:</strong>
                        {{ mobile.mobile_image_name }}
                        <mat-icon
                          (click)="importClipboard(mobile.mobile_image_name)"
                          [ngClass]="{ active: isIconActive[mobile.mobile_image_name] }"
                          class="copyClipboardIcon"
                          [color]="isIconActive[mobile.mobile_image_name] ? 'primary' : ''">
                          content_copy
                        </mat-icon>
                      </div>
                      <ng-container>
                        <div class="status-container">
                          <i class="material-icons">{{ runningContainer ? 'check_circle' : 'highlight_off' }}</i>
                          <strong>Status:</strong>
                          <span [ngClass]="{ 'running-text': runningContainer, 'stopped-text': !runningContainer }">
                            {{ runningContainer? runningContainer?.service_status: "Not Started"}}
                          </span>
                          <!-- Corrected ngClass syntax -->
                          <span [ngClass]="{ 'running': runningContainer, 'stopped': !runningContainer }" class="status-circle"></span>
                        </div>
                        <div class="options">
                          <button
                            matTooltip="Show more information"
                            matTooltipPosition="above"
                            mat-icon-button
                            [matMenuTriggerFor]="featureOptions">
                            <mat-icon>more_vert</mat-icon>
                          </button>
                          <span>
                            More information
                          </span>
                        </div>

                        <mat-menu #featureOptions="matMenu">
                          <mat-menu-item class="pop-up-info">
                            <ng-container *ngIf="runningContainer">
                              <mat-menu-item>
                                <i class="material-icons">code</i>
                                <strong>Mobile Code:</strong> {{ runningContainer.hostname }}
                                <mat-icon
                                  (click)="importClipboard(runningContainer.hostname); $event.stopPropagation();"
                                  [ngClass]="{ active: isIconActive[runningContainer.hostname] }"
                                  class="copyClipboardIcon"
                                  [color]="isIconActive[runningContainer.hostname] ? 'primary' : ''">
                                  content_copy
                                </mat-icon>
                              </mat-menu-item>
                            </ng-container>

                            <mat-menu-item>
                              <i class="material-icons">info</i>
                              <strong>Device Name:</strong> {{ mobile.mobile_json.deviceName }}
                            </mat-menu-item>

                            <mat-menu-item>
                              <i class="material-icons">memory</i>
                              <strong>Architecture:</strong> {{ mobile.mobile_json.architecture }}
                            </mat-menu-item>

                            <mat-menu-item>
                              <i class="material-icons">phone_android</i>
                              <strong>Android Version:</strong> {{ mobile.mobile_json.android_version }}
                            </mat-menu-item>

                            <mat-menu-item>
                              <i class="material-icons">layers</i>
                              <strong>API Level:</strong> {{ mobile.mobile_json.api_level }}
                            </mat-menu-item>
                          </mat-menu-item>
                        </mat-menu>
                      </ng-container>
                    </div>

                    <h4 *ngIf="runningContainer else notRunning">Mobile Actions</h4>
                    <ng-template #notRunning>
                      <h4 id="mobile-actions">Mobile Actions</h4>
                    </ng-template>
                    <mat-divider></mat-divider>

                    <div class="apk-selection">
                      <mat-slide-toggle
                        [disabled]="!runningContainer"
                        class="mat-slider-toggle"
                        id="isShared_{{ mobile.mobile_id }}"
                        color="primary"
                        [checked]="runningContainer?.shared"
                        (change)="
                          updateSharedStatus($event, mobile, runningContainer)
                        ">
                        <p>Share this mobile with others</p>
                      </mat-slide-toggle>
                      <div
                        [ngClass]="{ 'disabled-content': !runningContainer }"
                        class="row-content">

                        <mat-icon [inline]="true" class="get-app"
                        [matTooltip]="'mobile_list.apk_file' | translate"
                          matTooltipPosition="above">
                          file_download
                        </mat-icon>
                        <p [matTooltip]="'mobile_list.apk_file' | translate"
                        matTooltipPosition="above">
                          Install Application
                        </p>
                      </div>
                      <mat-form-field  class="select-app">
                        <mat-label>Select App (extension <strong>.apk</strong>)</mat-label>
                        <mat-select
                          [disabled]="!runningContainer"
                          id="apkFileSelectBox_{{ mobile.mobile_id }}"
                          [(value)]="selectedApps[mobile.mobile_id]"
                          (selectionChange)="
                            updateAPKSelection($event, mobile, runningContainer)
                          ">
                          <mat-option
                            *ngFor="let apk_file of this.apkFiles"
                            [value]="apk_file.id">
                            {{ apk_file.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <button
                        class="mobile-buttons-install"
                        mat-raised-button
                        color="primary"
                        [disabled]="!mobile.selectedAPKFileID"
                        (click)="installAPK(mobile, runningContainer)">
                        Install App
                      </button>
                    </div>
                  </div>

                  <!-- Actions: Start, Stop, Inspect -->
                  <div class="mobile-buttons">
                    <button
                      *ngIf="!runningContainer"
                      (click)="startMobile(mobile.mobile_id)"
                      [disabled]="!selectionsDisabled"
                      mat-raised-button
                      color="primary"
                      class="start-stop-inpect-buttons start">
                      Start
                    </button>

                    <ng-container *ngIf="runningContainer">
                      <button
                        (click)="restartMobile(runningContainer)"
                        mat-raised-button
                        color="primary"
                        class="start-stop-inpect-buttons"
                        [disabled]="runningContainer.isTerminating"
                        [matTooltip]="'mobile_list.restart_emulator' | translate" matTooltipPosition="above">
                        Restart
                      </button>
                      <button
                        (click)="pauseMobile(runningContainer)"
                        mat-raised-button
                        color="warn"
                        class="start-stop-inpect-buttons"
                        [disabled]="runningContainer.isTerminating"
                        [matTooltip]="'mobile_list.pause_emulator' | translate" matTooltipPosition="above">
                        Pause
                      </button>
                      <button
                        (click)="inspectMobile(runningContainer, mobile)"
                        mat-raised-button
                        color="basic"
                        class="start-stop-inpect-buttons"
                        [disabled]="runningContainer.isTerminating"
                        [matTooltip]="'mobile_list.inspect_emulator' | translate" matTooltipPosition="above">
                        <span class="inspect-text">Inspect</span>
                        <i class="material-icons icon-on-hover">visibility</i>
                      </button>
                      <button
                        (click)="noVNCMobile(runningContainer, mobile)"
                        mat-raised-button
                        color="basic"
                        class="start-stop-inpect-buttons noVNCButton"
                        [disabled]="runningContainer.isTerminating"
                        [matTooltip]="'mobile_list.inspect_novnc' | translate" matTooltipPosition="above">
                        <span class="inspect-text">noVNC</span>
                        <i class="material-icons icon-on-hover">visibility</i>
                      </button>
                    </ng-container>
                  </div>
                </div>
              </div>
            </div>
            <h3>Shared Mobile Devices</h3>
            <div class="mobiles">
              <!-- Iterate over shared containers list -->
              <div class="mobile" *ngFor="let container of sharedMobileContainers">
                <div *ngLet="container.service_status == 'Running' as isRunning">
                  <!-- Shared device details -->
                  <div class="mobile-details">
                    <h4>Shared Device Information</h4>
                    <mat-divider></mat-divider>
                    <div class="emulator-info">
                      <i class="material-icons">adb</i>
                      <strong>Mobile Name:</strong>
                      {{ container.image.mobile_image_name }}
                      <mat-icon
                        (click)="importClipboard(container.image.mobile_image_name)"
                        [ngClass]="{ active: isIconActive[container.image.mobile_image_name] }"
                        class="copyClipboardIcon"
                        [color]="isIconActive[container.image.mobile_image_name] ? 'primary' : ''">
                        content_copy
                      </mat-icon>
                    </div>
                    <!-- <div class="emulator-info" *ngIf="isRunning">
                      <i class="material-icons">code</i>
                      <strong>Device Code:</strong>
                      {{ container.hostname }}
                      <mat-icon
                        (click)="importClipboard(container.hostname)"
                        [ngClass]="{ active: isIconActive }"
                        class="copyClipboardIcon"
                        [color]="isIconActive ? 'primary' : ''">
                        content_copy
                      </mat-icon>
                    </div> -->
                    <ng-container>
                      <div class="status-container">
                        <i class="material-icons">{{ isRunning ? 'check_circle' : 'highlight_off' }}</i>
                        <strong>Status:</strong>
                        <span [ngClass]="{ 'running-text': isRunning, 'stopped-text': !isRunning }">
                          {{ container.service_status}}
                        </span>
                        <span [ngClass]="{ 'running': isRunning, 'stopped': !isRunning }" class="status-circle"></span>
                      </div>
                    </ng-container>

                    <div class="options">
                      <button
                        matTooltip="Show more information"
                        matTooltipPosition="above"
                        mat-icon-button
                        [matMenuTriggerFor]="featureOptions">
                        <mat-icon>more_vert</mat-icon>
                      </button>
                      <span>
                        More information
                      </span>
                    </div>

                    <mat-menu #featureOptions="matMenu">
                      <mat-menu-item class="pop-up-info">
                        <ng-container *ngIf="runningContainer">
                          <mat-menu-item>
                            <i class="material-icons">code</i>
                            <strong>Mobile Code:</strong> {{ runningContainer.hostname }}
                            <mat-icon
                              (click)="importClipboard(runningContainer.hostname); $event.stopPropagation();"
                              [ngClass]="{ active: isIconActive[runningContainer.hostname] }"
                              class="copyClipboardIcon"
                              [color]="isIconActive[runningContainer.hostname] ? 'primary' : ''">
                              content_copy
                            </mat-icon>
                          </mat-menu-item>
                        </ng-container>

                        <mat-menu-item>
                          <i class="material-icons">code</i>
                          <strong>Device Code:</strong>
                          {{ container.hostname }}
                          <mat-icon
                            (click)="importClipboard(container.hostname)"
                            [ngClass]="{ active: isIconActive[container.hostname] }"
                            class="copyClipboardIcon"
                            [color]="isIconActive[container.hostname] ? 'primary' : ''">
                            content_copy
                          </mat-icon>
                        </mat-menu-item>

                        <mat-menu-item>
                          <i class="material-icons">info</i>
                          <strong>Device Name:</strong> {{ container.image.mobile_json.deviceName }}
                        </mat-menu-item>

                        <mat-menu-item>
                          <i class="material-icons">memory</i>
                          <strong>Architecture:</strong> {{ container.image.mobile_json.architecture }}
                        </mat-menu-item>

                        <mat-menu-item>
                          <i class="material-icons">phone_android</i>
                          <strong>Android Version:</strong> {{ container.image.mobile_json.android_version }}
                        </mat-menu-item>

                        <mat-menu-item>
                          <i class="material-icons">layers</i>
                          <strong>API Level:</strong> {{ container.image.mobile_json.api_level }}
                        </mat-menu-item>
                      </mat-menu-item>
                    </mat-menu>
                  </div>
                </div>

                <!-- Actions: Start, Stop, Inspect -->
                <div class="mobile-buttons-shared">
                  <button
                    (click)="inspectMobile(container, container.image)"
                    mat-raised-button
                    color="basic"
                    class="inspect-shared"
                    [matTooltip]="'mobile_list.inspect_emulator_shared' | translate" matTooltipPosition="above">
                    <span class="inspect-text inspect-hover">Inspect</span>
                    <i class="material-icons icon-on-hover">visibility</i>
                  </button>
                  <button
                    (click)="noVNCMobile(container, mobile)"
                    mat-raised-button
                    color="basic"
                    class="inspect-shared"
                    [matTooltip]="'mobile_list.inspect_novnc_shared' | translate" matTooltipPosition="above">
                    <span class="inspect-text novnc-hover">noVNC</span>
                    <i class="material-icons icon-on-hover">visibility</i>
                  </button>
                </div>
                <div class="created-by">
                  <strong>Created by:</strong> {{ container.created_by_name }}
                </div>
              </div>
              <p *ngIf="sharedMobileContainers.length == 0" class="nonMobileShared">
                There are no shared mobiles available for you. You can ask your
                teammates to share their mobile emulators so you can collaborate on
                the same machine.
              </p>
            </div>
          </div>
        </div>
    </div>
  </div>
</ng-template>