# Deployment and Docker Cursor Rules

## Docker Standards

### Dockerfile Guidelines
- Use multi-stage builds when possible
- Specify exact base image versions
- Minimize the number of layers
- Use .dockerignore files
- Set proper user permissions

### Container Best Practices
- Run containers as non-root user
- Use health checks
- Implement proper logging
- Set resource limits
- Use environment variables for configuration

### Docker Compose
- Use version 3.x syntax
- Define service dependencies properly
- Use named volumes for persistence
- Implement proper networking
- Set restart policies

## Kubernetes Deployment

### Pod Configuration
- Use resource requests and limits
- Implement proper health checks
- Use ConfigMaps and Secrets
- Set appropriate security contexts
- Use anti-affinity rules when needed

### Service Configuration
- Use appropriate service types
- Implement proper load balancing
- Use ingress controllers
- Set up proper DNS resolution
- Monitor service endpoints

### Security Guidelines
- Use RBAC for access control
- Implement network policies
- Use security contexts
- Scan images for vulnerabilities
- Implement proper secrets management

## CI/CD Pipeline

### GitLab CI Rules
- Use proper stage definitions
- Implement caching strategies
- Use environment variables securely
- Test before deployment
- Implement rollback procedures

### Deployment Strategy
- Use blue-green deployments
- Implement canary releases
- Monitor deployment health
- Use proper versioning
- Document deployment procedures

## Infrastructure as Code

### Configuration Management
- Use environment-specific configs
- Implement proper secret management
- Use configuration validation
- Document configuration options
- Version control all configurations

### Monitoring and Logging
- Implement proper logging
- Use centralized log aggregation
- Set up monitoring dashboards
- Configure alerting rules
- Track performance metrics

## Security Considerations

### Access Control
- Implement least privilege principle
- Use proper authentication
- Audit access logs
- Rotate credentials regularly
- Implement proper backup procedures

### Network Security
- Use private networks when possible
- Implement proper firewall rules
- Use VPN for remote access
- Monitor network traffic
- Implement intrusion detection
